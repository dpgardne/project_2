<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>photo edit</title>
    <style>
    #map {
      width: 400px;;
      height: 400px;
      background-color: grey;
      margin: 20px;
    }


  #floating-panel {

    z-index: 5;
    background-color: #fff;
    padding: 5px;
    border: 1px solid #999;
    text-align: center;
    font-family: 'Roboto','sans-serif';
    line-height: 30px;
    padding-left: 10px;
  }
</style>
  </head>
  <body onload="initialize()">
    <h1> User photo </h1>

    <h1><%=photos.name%></h1>
			<small>
				by:
          <a href="/users/<%=users._id%>"><%=users.user%></a>
      </small>

    <nav>
				<ul>
					<li>
						<a href="/">Home</a>
					</li>
					<li>
						<a href="/photos">Photo index</a>
					</li>
				</ul>
			</nav>

      <div>
        <h2><%=photos.name%></h2>
        <img src="<%=photos.image%>" />
          <p><%=photos.address%></p>
        <p><%=photos.description%></p>

        <div id="floating-panel">
            <input id="address" type="textbox" value="<%=photos.address%>">
            <input id="submit" type="button" value="Geocode">
          </div>

          <div id="map">
          <script>
            function initMap() {
              var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 8,
                center: {lat: 47.6079681, lng: -122.335}
              });
              var geocoder = new google.maps.Geocoder();

              document.getElementById('submit').addEventListener('click', function() {
                geocodeAddress(geocoder, map);
              });
            }

            function geocodeAddress(geocoder, resultsMap) {
              var address = document.getElementById('address').value;
              geocoder.geocode({'address': address}, function(results, status) {
                if (status === 'OK') {
                  resultsMap.setCenter(results[0].geometry.location);
                  var marker = new google.maps.Marker({
                    map: resultsMap,
                    position: results[0].geometry.location
                  });
                } else {
                  alert('Geocode was not successful for the following reason: ' + status);
                }
              });
            }
          </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCxcmHz-O5EMmTzjViO2cZ9SeGu80rkb3Q&callback=initMap">
    </script>


  </div>
      </div>
      <br />
      <br />
      <form action="/photos/<%=photos.id%>?_method=DELETE" method="POST">
              <input type="submit" value="delete this photo">
            </form>

            <a href="/photos/<%=photos.id%>/edit">Edit this photo</a>

  </body>
</html>
